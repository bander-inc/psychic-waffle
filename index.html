<html>
  <head>
    <title>P S Y C H I C &nbsp; W A F F L E </title>
  </head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.8.0/pixi.min.js"></script>
  <script src="src/pixi-projection.js"></script>
  <body>

    <script type="text/javascript">
     //Create a Pixi Application
    var app = new PIXI.Application(512, 280, {backgroundColor: 0x1099bb});

    //Add the canvas
    document.body.appendChild(app.view);
      
      
      function createSquare(x, y) {
    var square = new PIXI.Sprite(PIXI.Texture.WHITE);
    square.tint = 0xff0000;
    square.factor = 1;
    square.anchor.set(0.5);
    square.position.set(x, y);
    return square;
}

var squares = [
    createSquare(16, 16),
    createSquare(80, 80),
    createSquare(80, 128),
    createSquare(16, 192)
];

     // start ceiling and floor
      
   var graphics = new PIXI.Graphics();
  // set a fill and line style
  graphics.beginFill(0x595858, 1);
  graphics.lineStyle(0, 0, 0, 0);
  // ceiling
  graphics.drawRect(16,16,320,64);
  graphics.endFill();
   // floor
  graphics.beginFill(0xbcbcbc, 1);
  graphics.drawRect(16, 144, 320, 64);
      
      app.stage.addChild(graphics);
      
var quad = squares.map(function(s) { return s.position });

//add sprite itself
var containerSprite = new PIXI.projection.Sprite2s(new PIXI.Texture.fromImage("stonetiles_003_diff.jpg"));
containerSprite.anchor.set(0.5);

app.stage.addChild(containerSprite);
squares.forEach(function(s) { app.stage.addChild(s); });

     //var message = new PIXI.Text("I have no idea what I'm doing...");
     //message.x = 128;
     //message.y = 128;
     //app.stage.addChild(message);

      // Listen for animate update
app.ticker.add(function (delta) {
    containerSprite.proj.mapBilinearSprite(containerSprite, quad);
});
      
  </script>
  </body>
</html>
